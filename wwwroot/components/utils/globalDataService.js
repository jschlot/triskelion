/* global angular */
angular
    .module('triskelion.utils.globalData.service', ['triskelion.party.factory', 'triskelion.character.hero.factory', 'triskelion.monster.factory'])
    .service('gameModules', [
        function () {
            'use strict';

            var gameModules = {
                dungeon: {
                    name: 'Dungeon of Grim Souls',
                    hotkey: 'D',
                    _self: 'dungeon',
                    maxparty: 3,
                    mapRows: 20, // offset by 1
                    mapCols: 29, // offset by 1
                    defaultCompassDirection: 'west',
                    defaultLevel: 0,
                    startingCoordinates: [28,1], // [ X, Y ]
                    map: [
                        {
                            name: 'The Catacombs',
                            layout: [
                                // action tiles start at 0x20, 0x18 is floor, 0x1A is a door, 0xFF is the exit

                                // 0     1     2     3     4     5     6     7     8     9    10    11    12    13    14    15    16    17    18    19    20    21    22    23    24    25    26    27    28    29
                                [0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01],  // 0
                                [0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01],  // 1
                                [0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01],  // 2
                                [0x01, 0x18, 0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x1A, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01],  // 3
                                [0x01, 0x18, 0x01, 0x18, 0x01, 0x18, 0x18, 0x01, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01, 0x18, 0x18, 0x18, 0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x18, 0x01, 0x01],  // 4
                                [0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01, 0x18, 0x18, 0x18, 0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01],  // 5
                                [0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x01, 0x18, 0x18, 0x01, 0x18, 0x01, 0x01, 0x1A, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01],  // 6
                                [0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x01, 0x18, 0x18, 0x19, 0x18, 0x18, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01],  // 7
                                [0x01, 0x18, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x18, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x01, 0x01, 0x1C, 0x01, 0x18, 0x01, 0x18, 0x01, 0x18, 0x18, 0x18, 0x18, 0x01],  // 8
                                [0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x18, 0x01, 0x18, 0x19, 0x18, 0x18, 0x01, 0x18, 0x01],  // 9
                                [0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01, 0x18, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01, 0x01, 0x01, 0x18, 0x18, 0x01, 0x18, 0x01],  // 10
                                [0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x18, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01],  // 11
                                [0x01, 0x01, 0x01, 0x1A, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x01],  // 12
                                [0x01, 0x01, 0x18, 0x18, 0x18, 0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x01, 0x18, 0x01, 0x1C, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01],  // 13
                                [0x01, 0x01, 0x18, 0x18, 0x18, 0x01, 0x18, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x18, 0x01, 0x18, 0x18, 0x18, 0x01, 0x18, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01],  // 14
                                [0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x18, 0x01, 0x01, 0x1C, 0x01],  // 15
                                [0x01, 0xFF, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x18, 0x01, 0x01, 0x18, 0x01],  // 16
                                [0x01, 0x18, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x18, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1B, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01, 0x01, 0x01, 0x18, 0x01],  // 17
                                [0x01, 0x18, 0x18, 0x18, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x18, 0x18, 0x18, 0x18, 0x18, 0x01],  // 18
                                [0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01],  // 19



                            ]
                        }
                    ],
                    // ** ACTION TYPES ** damage, heal, buff, debuff, combat, container, conversation
                    // ** AURA TYPES ** acid, blunt, cold, fire, lightning, necrotic, piercing, poison, psychic, slashing, thunder, light
                    tileActions: [
                        {
                            description: 'A spray of lava splashes on the party!',
                            actionType: 'damage',
                            aura: 'fire',
                            save: 'agility',
                            check: 19,
                            modifier: 1,
                            hit: {
                                numberOfDice: 1,
                                diceSides: 4
                            },
                            miss: null
                        },
                        {
                            description: 'A ray of light shines upon the group!',
                            actionType:  'heal',
                            aura: 'light',
                            save: null,
                            check: 0,
                            modifier: 0,
                            hit: {
                                numberOfDice: 2,
                                diceSides: 8
                            },
                            miss: null
                        },
                        {
                            description: 'A eerie wailing sound comes from down the hallway...',
                            actionType:  'message'
                        },
                        {
                            description: 'You stumble upon a pair of Elvish Fiends!',
                            actionType:  'combat',
                            mobMembers: [
                                { spec: 'fiend', level: 1 },
                                { spec: 'fiend', level: 2 }
                            ]
                        }
                    ]
                }
            };

            return gameModules;
        }
    ])
    .service('userData', [
        function () {
            'use strict';

            var userData = {
                gameModuleSelected: null,
                cursor: {},
                gameMode: 'downtime'
            };
            return userData;
        }
    ])
    .service('partyDB', ['Party',
        function (Party) {
            'use strict';

            var partyDB = new Party();
            return partyDB;
        }
    ])
    .service('mobDB', ['Party', 'monsterMaker',
        function (Party, monsterMaker) {
            'use strict';

            var mobDB = new Party();

            mobDB.add = function(mob) {
                angular.forEach(mob, function (player) {
                    mobDB.members.push(monsterMaker.spawn(player));
                });
            };

            return mobDB;
        }
    ])
    .service('tellsList', [
        function () {
            'use strict';

            var tellsList = {};
            tellsList.log = [];
            return tellsList;
        }
    ])
    .service('aurasList', [
        function () {
            'use strict';

            var aurasList = {};
            aurasList.log = [];
            return aurasList;
        }
    ])
    .service('playerDB',['heroMaker',
        function (heroMaker) {
            'use strict';

            var playerDB = {};
            playerDB.dungeon = [];
            playerDB.dungeon.push(heroMaker.spawn({name: 'Devonellah', spec: 'priest'}));
            playerDB.dungeon.push(heroMaker.spawn({name: 'Frank', spec: 'priest'}));

            return playerDB;
        }]
    );
